\doxysection{encoders.\+hpp}
\hypertarget{encoders_8hpp_source}{}\label{encoders_8hpp_source}\index{lib/encoders.hpp@{lib/encoders.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#include\ <stdint.h>}}
\DoxyCodeLine{00002\ \textcolor{comment}{/*}}
\DoxyCodeLine{00003\ \textcolor{comment}{Encoders\ Module\ of\ the\ StepDance\ Control\ System}}
\DoxyCodeLine{00004\ \textcolor{comment}{}}
\DoxyCodeLine{00005\ \textcolor{comment}{This\ module\ interfaces\ with\ encoder\ inputs}}
\DoxyCodeLine{00006\ \textcolor{comment}{}}
\DoxyCodeLine{00007\ \textcolor{comment}{[More\ Details\ to\ be\ Added]}}
\DoxyCodeLine{00008\ \textcolor{comment}{}}
\DoxyCodeLine{00009\ \textcolor{comment}{A\ part\ of\ the\ Mixing\ Metaphors\ Project}}
\DoxyCodeLine{00010\ \textcolor{comment}{(c)\ 2025\ Ilan\ Moyer,\ Jennifer\ Jacobs,\ Devon\ Frost}}
\DoxyCodeLine{00011\ \textcolor{comment}{}}
\DoxyCodeLine{00012\ \textcolor{comment}{*/}}
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ "{}core.hpp"{}}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ <QuadEncoder.h>}}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#ifndef\ encoders\_h\ }\textcolor{comment}{//prevent\ importing\ twice}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#define\ encoders\_h}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#define\ MAX\_NUM\_ENCODERS\ 3\ }\textcolor{comment}{//this\ is\ the\ most\ we\ can\ get\ out\ of\ a\ stepdance\ board\ (ENC1,\ ENC2,\ and\ INPUT\_A)}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#define\ ENCODER\_1\ 0}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#define\ ENCODER\_2\ 1}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#define\ ENCODER\_A\ 2\ }\textcolor{comment}{//the\ A\ stepdance\ input\ can\ double\ as\ a\ third\ encoder\ input}}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structencoder__info__struct}{encoder\_info\_struct}}\{}
\DoxyCodeLine{00025\ \ \ uint8\_t\ CHANNEL\_A\_TEENSY\_PIN;}
\DoxyCodeLine{00026\ \ \ uint8\_t\ CHANNEL\_B\_TEENSY\_PIN;}
\DoxyCodeLine{00027\ \};}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \textcolor{keyword}{class\ }Encoder\ :\ \textcolor{keyword}{public}\ Plugin\{}
\DoxyCodeLine{00030\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00031\ \ \ \ \ Encoder();}
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{keywordtype}{void}\ begin(uint8\_t\ encoder\_index);}
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{keywordtype}{void}\ invert();}
\DoxyCodeLine{00034\ \ \ \ \ int32\_t\ read();\ \textcolor{comment}{//directly\ reads\ the\ instantaneous\ encoder\ value}}
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keywordtype}{void}\ reset();\ \textcolor{comment}{//resets\ the\ encoder\ value\ to\ zero}}
\DoxyCodeLine{00036\ \ \ \ \ \textcolor{keywordtype}{void}\ set(DecimalPosition\ value);\ \textcolor{comment}{//resets\ the\ encoder\ value\ to\ a\ provided\ value,\ in\ world\ units}}
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{keywordtype}{void}\ set\_latch(DecimalPosition\ value\_world\_units,\ uint8\_t\ min\_or\_max);}
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{keywordtype}{void}\ set\_ratio(\textcolor{keywordtype}{float}\ output\_units,\ \textcolor{keywordtype}{float}\ encoder\_units\ =\ 1.0);}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{comment}{//\ BlockPorts}}
\DoxyCodeLine{00041\ \ \ \ \ \mbox{\hyperlink{class_block_port}{BlockPort}}\ output;}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{keywordtype}{bool}\ min\_latch\_enabled\ =\ \textcolor{keyword}{false};\ \textcolor{comment}{//enables\ latching\ in\ the\ negative\ direction\ (encoder\ units)}}
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{keywordtype}{bool}\ max\_latch\_enabled\ =\ \textcolor{keyword}{false};\ \textcolor{comment}{//enables\ latching\ in\ the\ positive\ direction}}
\DoxyCodeLine{00045\ \ \ \ \ int32\_t\ min\_latch\_value\ =\ 0;\ \textcolor{comment}{//encoder\ units}}
\DoxyCodeLine{00046\ \ \ \ \ int32\_t\ max\_latch\_value\ =\ 0;}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structencoder__info__struct}{encoder\_info\_struct}}\ encoder\_info[];\ \textcolor{comment}{//stores\ configuration\ for\ all\ available\ encoder\ ports}}
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{keyword}{static}\ QuadEncoder*\ all\_encoders[MAX\_NUM\_ENCODERS];}
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keywordtype}{void}\ QuadEncoder\_configure(uint8\_t\ encoder\_index);\ \textcolor{comment}{//applies\ the\ configuration\ stored\ in\ encoder\_info[encoder\_index]\ to\ the\ QuadEncoder\ object.}}
\DoxyCodeLine{00052\ \ \ \ \ QuadEncoder*\ quad\_encoder;\ \textcolor{comment}{//pointer\ to\ the\ active\ quad\ encoder\ for\ this\ instance}}
\DoxyCodeLine{00053\ \ \ \ \ uint8\_t\ invert\_flag\ =\ 0;}
\DoxyCodeLine{00054\ \ \ \ \ DecimalPosition\ encoder\_value;\ \textcolor{comment}{//stores\ the\ encoder\ position\ as\ a\ DecimalPosition.\ This\ gets\ updated\ at\ the\ beginning\ of\ each\ call\ to\ run();}}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{keywordtype}{void}\ run();}
\DoxyCodeLine{00058\ \};}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//encoders\_h}}

\end{DoxyCode}
