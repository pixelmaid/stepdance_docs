\doxysection{kinematics.\+hpp}
\hypertarget{kinematics_8hpp_source}{}\label{kinematics_8hpp_source}\index{lib/kinematics.hpp@{lib/kinematics.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#include\ "{}arm\_math.h"{}}}
\DoxyCodeLine{00002\ \textcolor{comment}{/*}}
\DoxyCodeLine{00003\ \textcolor{comment}{Kinematics\ Module\ of\ the\ StepDance\ Control\ System}}
\DoxyCodeLine{00004\ \textcolor{comment}{}}
\DoxyCodeLine{00005\ \textcolor{comment}{This\ module\ provides\ a\ variety\ of\ mechanism\ kinematics\ to\ go\ from\ one\ motion\ space\ (e.g.\ XY)\ to\ another\ (e.g.\ AB\ or\ RT)\ via\ e.g.\ an\ h-\/bot\ or\ polar\ mechanism,\ etc.}}
\DoxyCodeLine{00006\ \textcolor{comment}{}}
\DoxyCodeLine{00007\ \textcolor{comment}{[More\ Details\ to\ be\ Added]}}
\DoxyCodeLine{00008\ \textcolor{comment}{}}
\DoxyCodeLine{00009\ \textcolor{comment}{A\ part\ of\ the\ Mixing\ Metaphors\ Project}}
\DoxyCodeLine{00010\ \textcolor{comment}{(c)\ 2025\ Ilan\ Moyer,\ Jennifer\ Jacobs,\ Devon\ Frost}}
\DoxyCodeLine{00011\ \textcolor{comment}{*/}}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ "{}core.hpp"{}}}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#ifndef\ kinematics\_h\ }\textcolor{comment}{//prevent\ importing\ twice}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#define\ kinematics\_h}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{keyword}{class\ }KinematicsCoreXY\ :\ \textcolor{keyword}{public}\ Plugin\{}
\DoxyCodeLine{00019\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00020\ \ \ \ \ KinematicsCoreXY();}
\DoxyCodeLine{00021\ \ \ \ \ \textcolor{keywordtype}{void}\ begin();}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \ \ \ \ \textcolor{comment}{//\ BlockPorts}}
\DoxyCodeLine{00024\ \ \ \ \ \mbox{\hyperlink{class_block_port}{BlockPort}}\ input\_x;}
\DoxyCodeLine{00025\ \ \ \ \ \mbox{\hyperlink{class_block_port}{BlockPort}}\ input\_y;}
\DoxyCodeLine{00026\ \ \ \ \ \mbox{\hyperlink{class_block_port}{BlockPort}}\ output\_a;}
\DoxyCodeLine{00027\ \ \ \ \ \mbox{\hyperlink{class_block_port}{BlockPort}}\ output\_b;}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00030\ \ \ \ \ \textcolor{keyword}{volatile}\ DecimalPosition\ position\_x\ =\ 0;\ \textcolor{comment}{//internal\ registers\ to\ store\ state\ positions}}
\DoxyCodeLine{00031\ \ \ \ \ \textcolor{keyword}{volatile}\ DecimalPosition\ position\_y\ =\ 0;}
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{keyword}{volatile}\ DecimalPosition\ position\_a\ =\ 0;}
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{keyword}{volatile}\ DecimalPosition\ position\_b\ =\ 0;}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{comment}{//\ DecimalPosition\ get\_position\_x();\ //\ return\ current\ positions\ in\ input\ space,\ and\ override\ the\ input\_transmission\ get()\ functions}}
\DoxyCodeLine{00036\ \ \ \ \ \textcolor{comment}{//\ DecimalPosition\ get\_position\_y();}}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{keywordtype}{void}\ run();}
\DoxyCodeLine{00040\ \};}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \textcolor{keyword}{class\ }KinematicsPolarToCartesian\ :\ \textcolor{keyword}{public}\ Plugin\{}
\DoxyCodeLine{00043\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00044\ \ \ \ \ KinematicsPolarToCartesian();}
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{keywordtype}{void}\ begin(float64\_t\ fixed\_radius\ =\ 0);\ \textcolor{comment}{//optional\ radius\ parameter}}
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{keywordtype}{void}\ reset();\ \textcolor{comment}{//TODO:\ resets\ the\ internal\ state}}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{keywordtype}{void}\ solve\_kinematics();\ \textcolor{comment}{//TODO:\ solves\ the\ relationship\ between\ r-\/t\ and\ x-\/y.}}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ we\ do\ this\ outside\ run()\ so\ that\ it\ can\ be\ called\ during\ a\ state\ reset.}}
\DoxyCodeLine{00049\ \ \ \ \ }
\DoxyCodeLine{00050\ \ \ \ \ \mbox{\hyperlink{class_block_port}{BlockPort}}\ input\_radius;}
\DoxyCodeLine{00051\ \ \ \ \ \mbox{\hyperlink{class_block_port}{BlockPort}}\ input\_angle;}
\DoxyCodeLine{00052\ \ \ \ \ \mbox{\hyperlink{class_block_port}{BlockPort}}\ output\_x;}
\DoxyCodeLine{00053\ \ \ \ \ \mbox{\hyperlink{class_block_port}{BlockPort}}\ output\_y;}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00056\ \ \ \ \ DecimalPosition\ position\_r\ =\ 0;}
\DoxyCodeLine{00057\ \ \ \ \ DecimalPosition\ position\_a\ =\ 0;}
\DoxyCodeLine{00058\ \ \ \ \ DecimalPosition\ position\_x\ =\ 0;}
\DoxyCodeLine{00059\ \ \ \ \ DecimalPosition\ position\_y\ =\ 0;}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keywordtype}{void}\ run();}
\DoxyCodeLine{00063\ \};}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \textcolor{keyword}{class\ }KinematicsFiveBarForward\ :\ \textcolor{keyword}{public}\ Plugin\{}
\DoxyCodeLine{00066\ \ \ \textcolor{comment}{//\ Converts\ encoder\ (or\ motor)\ angles\ to\ XY\ coordinates\ for\ a\ five-\/bar\ parallel\ kinematics\ mechanism\ (e.g.\ Parallel\ SCARA)}}
\DoxyCodeLine{00067\ \ \ \textcolor{comment}{//\ This\ was\ created\ for\ the\ digital\ pantograph,\ so\ we\ will\ generally\ refer\ to\ encoders\ rather\ than\ motors.}}
\DoxyCodeLine{00068\ \ \ \textcolor{comment}{//\ Because\ this\ module\ works\ with\ absolute\ inputs\ and\ therefor\ will\ not\ accumulate\ error,\ we\ will\ use\ float32\_t\ precision}}
\DoxyCodeLine{00069\ \ \ \textcolor{comment}{//\ (rather\ than\ float64\_t)\ to\ speed\ up\ calculations.\ Inputs\ and\ outputs\ remain\ float64\_t.}}
\DoxyCodeLine{00070\ \ \ \textcolor{comment}{//\ For\ clarity\ of\ equations\ We\ will\ use\ capital\ letters\ for\ certain\ variables\ within\ this\ function.\ Externally\ we}}
\DoxyCodeLine{00071\ \ \ \textcolor{comment}{//\ maintain\ consistency\ with\ only\ using\ capital\ letters\ for\ constants.}}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00074\ \ \ \ \ KinematicsFiveBarForward();}
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keywordtype}{void}\ begin(float32\_t\ s,\ float32\_t\ l1,\ float32\_t\ l2,\ float32\_t\ l3,\ float32\_t\ l4,\ float32\_t\ l5,\ float32\_t\ a);}
\DoxyCodeLine{00076\ \ \ \ \ }
\DoxyCodeLine{00077\ \ \ \ \ \mbox{\hyperlink{class_block_port}{BlockPort}}\ input\_r;}
\DoxyCodeLine{00078\ \ \ \ \ \mbox{\hyperlink{class_block_port}{BlockPort}}\ input\_l;}
\DoxyCodeLine{00079\ \ \ \ \ \mbox{\hyperlink{class_block_port}{BlockPort}}\ output\_x;}
\DoxyCodeLine{00080\ \ \ \ \ \mbox{\hyperlink{class_block_port}{BlockPort}}\ output\_y;}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00083\ \ \ \ \ DecimalPosition\ position\_r\ =\ 0;\ \textcolor{comment}{//right\ angle,\ in\ radians}}
\DoxyCodeLine{00084\ \ \ \ \ DecimalPosition\ position\_l\ =\ 0;\ \textcolor{comment}{//left\ angle,\ in\ radians}}
\DoxyCodeLine{00085\ \ \ \ \ DecimalPosition\ position\_x\ =\ 0;}
\DoxyCodeLine{00086\ \ \ \ \ DecimalPosition\ position\_y\ =\ 0;}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ \ \ float32\_t\ S;\ \textcolor{comment}{//\ encoder\ separation}}
\DoxyCodeLine{00089\ \ \ \ \ float32\_t\ L1;\ \textcolor{comment}{//\ right\ encoder\ arm\ length}}
\DoxyCodeLine{00090\ \ \ \ \ float32\_t\ L2;\ \textcolor{comment}{//\ left\ encoder\ arm\ length}}
\DoxyCodeLine{00091\ \ \ \ \ float32\_t\ L3;\ \textcolor{comment}{//\ right\ pivot\ arm\ length}}
\DoxyCodeLine{00092\ \ \ \ \ float32\_t\ L4;\ \textcolor{comment}{//\ left\ pivot\ arm\ length}}
\DoxyCodeLine{00093\ \ \ \ \ float32\_t\ L5;\ \textcolor{comment}{//\ tool\ arm\ length}}
\DoxyCodeLine{00094\ \ \ \ \ float32\_t\ A6;\ \textcolor{comment}{//\ tool\ arm\ angle\ in\ rad}}
\DoxyCodeLine{00095\ \ \ \ \ float32\_t\ Xa;\ \textcolor{comment}{//\ X\ position\ of\ right\ encoder}}
\DoxyCodeLine{00096\ \ \ \ \ float32\_t\ Ya;\ \textcolor{comment}{//\ Y\ position\ of\ right\ encoder}}
\DoxyCodeLine{00097\ \ \ \ \ float32\_t\ Xb;\ \textcolor{comment}{//\ X\ position\ of\ left\ encoder}}
\DoxyCodeLine{00098\ \ \ \ \ float32\_t\ Yb;\ \textcolor{comment}{//\ Y\ position\ of\ left\ encoder}}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00100\ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00101\ \ \ \ \ \textcolor{keywordtype}{void}\ run();}
\DoxyCodeLine{00102\ \};}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ \textcolor{keyword}{using\ }KinematicsLever\ =\ \mbox{\hyperlink{class_kinematics_polar_to_cartesian}{KinematicsPolarToCartesian}};}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00106\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//kinematics\_h}}

\end{DoxyCode}
