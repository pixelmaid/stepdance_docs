<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Stepdance Software Library: PositionGenerator Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Stepdance Software Library
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('class_position_generator.html','','class_position_generator-members'); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">PositionGenerator Class Reference<div class="ingroups"><a class="el" href="group__generators.html">Generators</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Used for generating position signals based on a target position and maximum velocity.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="generators_8hpp_source.html">generators.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for PositionGenerator:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_position_generator.png" alt=""/>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-methods" class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1a1837f8127c065959382a5754ab1a53" id="r_a1a1837f8127c065959382a5754ab1a53"><td class="memItemLeft" align="right" valign="top"><a id="a1a1837f8127c065959382a5754ab1a53" name="a1a1837f8127c065959382a5754ab1a53"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>PositionGenerator</b> ()</td></tr>
<tr class="memdesc:a1a1837f8127c065959382a5754ab1a53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor for <a class="el" href="class_position_generator.html" title="Used for generating position signals based on a target position and maximum velocity.">PositionGenerator</a>. Does not initialize the Generator. Call <a class="el" href="#ac1ffc639139b334d2d180332859e0d48" title="Initialize the PositionGenerator. Must be called to set up the generator.">begin()</a> to set up the generator. <br /></td></tr>
<tr class="memitem:ac1ffc639139b334d2d180332859e0d48" id="r_ac1ffc639139b334d2d180332859e0d48"><td class="memItemLeft" align="right" valign="top"><a id="ac1ffc639139b334d2d180332859e0d48" name="ac1ffc639139b334d2d180332859e0d48"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>begin</b> ()</td></tr>
<tr class="memdesc:ac1ffc639139b334d2d180332859e0d48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the <a class="el" href="class_position_generator.html" title="Used for generating position signals based on a target position and maximum velocity.">PositionGenerator</a>. Must be called to set up the generator. <br /></td></tr>
<tr class="memitem:a4b39e72ca8796b959b5f1bd16bee5141" id="r_a4b39e72ca8796b959b5f1bd16bee5141"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4b39e72ca8796b959b5f1bd16bee5141">set_speed</a> (ControlParameter speed)</td></tr>
<tr class="memdesc:a4b39e72ca8796b959b5f1bd16bee5141"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the speed (maximum velocity) for the <a class="el" href="class_position_generator.html" title="Used for generating position signals based on a target position and maximum velocity.">PositionGenerator</a>.  <br /></td></tr>
<tr class="memitem:a069294b6a0d1b9204f1e613cb40f83a3" id="r_a069294b6a0d1b9204f1e613cb40f83a3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a069294b6a0d1b9204f1e613cb40f83a3">go</a> (float64_t distance_or_position, uint8_t mode)</td></tr>
<tr class="memdesc:a069294b6a0d1b9204f1e613cb40f83a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Command the <a class="el" href="class_position_generator.html" title="Used for generating position signals based on a target position and maximum velocity.">PositionGenerator</a> to move to a specified distance or position.  <br /></td></tr>
<tr class="memitem:ad6daff12b8005974f878d33d8ab5b1ba" id="r_ad6daff12b8005974f878d33d8ab5b1ba"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad6daff12b8005974f878d33d8ab5b1ba">go</a> (float64_t distance_or_position, uint8_t mode, ControlParameter speed)</td></tr>
<tr class="memdesc:ad6daff12b8005974f878d33d8ab5b1ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Command the <a class="el" href="class_position_generator.html" title="Used for generating position signals based on a target position and maximum velocity.">PositionGenerator</a> to move to a specified distance or position with a specified speed.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-attribs" class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a616c3fdcd9dfea7c2d18c4a69d9568f4" id="r_a616c3fdcd9dfea7c2d18c4a69d9568f4"><td class="memItemLeft" align="right" valign="top"><a id="a616c3fdcd9dfea7c2d18c4a69d9568f4" name="a616c3fdcd9dfea7c2d18c4a69d9568f4"></a>
volatile ControlParameter&#160;</td><td class="memItemRight" valign="bottom"><b>speed_units_per_sec</b> = 0</td></tr>
<tr class="memdesc:a616c3fdcd9dfea7c2d18c4a69d9568f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">ControlParameter that determines the speed of the <a class="el" href="class_position_generator.html" title="Used for generating position signals based on a target position and maximum velocity.">PositionGenerator</a>. Will not be used if speed is provided in the <a class="el" href="#a069294b6a0d1b9204f1e613cb40f83a3" title="Command the PositionGenerator to move to a specified distance or position.">go()</a> command. <br /></td></tr>
<tr class="memitem:abfeae5a3a55ab5333502b0d97f232647" id="r_abfeae5a3a55ab5333502b0d97f232647"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_block_port.html">BlockPort</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abfeae5a3a55ab5333502b0d97f232647">output</a></td></tr>
<tr class="memdesc:abfeae5a3a55ab5333502b0d97f232647"><td class="mdescLeft">&#160;</td><td class="mdescRight">Output <a class="el" href="class_block_port.html" title="BlockPorts provide a unified interface for mapping inputs and outputs of different StepDance componen...">BlockPort</a> for the <a class="el" href="class_position_generator.html" title="Used for generating position signals based on a target position and maximum velocity.">PositionGenerator</a>. This is what you map from to a downstream component.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pro-methods" class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:ac6871dbe97cd62a71fc730245d4a1ad6" id="r_ac6871dbe97cd62a71fc730245d4a1ad6"><td class="memItemLeft" align="right" valign="top"><a id="ac6871dbe97cd62a71fc730245d4a1ad6" name="ac6871dbe97cd62a71fc730245d4a1ad6"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>run</b> ()</td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Used for generating position signals based on a target position and maximum velocity. </p>
<p>A <a class="el" href="class_position_generator.html" title="Used for generating position signals based on a target position and maximum velocity.">PositionGenerator</a> maintains an internal position state and incrementally drives an output to reach a specified target position under the constraints of a maximum velocity. It is useful for generating smooth trajectories to an absolute or relative position. Position generators do not require an input signal, as they generate motion based on internal state and commands. Here's an example of how to instantiate and configure a <a class="el" href="class_position_generator.html" title="Used for generating position signals based on a target position and maximum velocity.">PositionGenerator</a>: </p><div class="fragment"><div class="line">   <span class="comment">// Will move a channel to a target position at a specified maximum velocity when a button is pressed.</span></div>
<div class="line"><span class="preprocessor">#define module_driver</span></div>
<div class="line"><span class="preprocessor">#include &quot;stepdance.hpp&quot;</span></div>
<div class="line"> </div>
<div class="line"><a class="code hl_class" href="class_position_generator.html">PositionGenerator</a> pos_gen;</div>
<div class="line"><a class="code hl_class" href="class_channel.html">Channel</a> channel_a;</div>
<div class="line"><a class="code hl_class" href="class_output_port.html">OutputPort</a> output_a;</div>
<div class="line"><a class="code hl_class" href="class_button.html">Button</a> start_button;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> setup() {</div>
<div class="line"> </div>
<div class="line">   <span class="comment">// Initialize OutputPort A</span></div>
<div class="line">  output_a.<a class="code hl_function" href="class_output_port.html#a0158ccdab5705216309a16eeb22039d0">begin</a>(OUTPUT_A);</div>
<div class="line">    <span class="comment">// Enable the output drivers</span></div>
<div class="line">  enable_drivers();</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Map PositionGenerator output to Channel A&#39;s target position</span></div>
<div class="line">  pos_gen.<a class="code hl_variable" href="#abfeae5a3a55ab5333502b0d97f232647">output</a>.<a class="code hl_function" href="class_block_port.html#a15141b0edfad4e702588f16599e2655b">map</a>(channel_a.input_target_position);</div>
<div class="line">  pos_gen.<a class="code hl_function" href="#ac1ffc639139b334d2d180332859e0d48">begin</a>();</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Initialize Channel A</span></div>
<div class="line">  channel_a.<a class="code hl_function" href="class_channel.html#a395b2f1afe3e1351806fb826e5a23d42">begin</a>(&amp;output_a, SIGNAL_E); <span class="comment">// Connect Channel A to OutputPort A&#39;s SIGNAL_E</span></div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Set speed for PositionGenerator</span></div>
<div class="line">  pos_gen.<a class="code hl_function" href="#a4b39e72ca8796b959b5f1bd16bee5141">set_speed</a>(50.0); <span class="comment">// Set velocity to 50 units per second</span></div>
<div class="line"> </div>
<div class="line">  start_button.<a class="code hl_function" href="class_button.html#ae11ebf1f392b1e0b0c47a5b78de59b8b">begin</a>(IO_D1); <span class="comment">// Initialize button on physical input port IO_D1  </span></div>
<div class="line">  start_button.<a class="code hl_function" href="class_button.html#aa70753298df42c33455aab1ee7bb4f5d">set_callback_on_release</a>(&amp;onButtonRelease); <span class="comment">// Set callback function for button press event</span></div>
<div class="line"> </div>
<div class="line">  dance_start();</div>
<div class="line">} </div>
<div class="line"><span class="keywordtype">void</span> onButtonRelease() {</div>
<div class="line">  <span class="comment">// Command PositionGenerator to move to target position when button is released</span></div>
<div class="line">  pos_gen.<a class="code hl_function" href="#a069294b6a0d1b9204f1e613cb40f83a3">go</a>(100.0, ABSOLUTE); <span class="comment">// Move to absolute position of 100.0 units</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> loop(){</div>
<div class="line">dance_loop();</div>
<div class="line">}</div>
</div><!-- fragment --> </div><a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Member Function Documentation</h2>
<a id="a069294b6a0d1b9204f1e613cb40f83a3" name="a069294b6a0d1b9204f1e613cb40f83a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a069294b6a0d1b9204f1e613cb40f83a3">&#9670;&#160;</a></span>go() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PositionGenerator::go </td>
          <td>(</td>
          <td class="paramtype">float64_t</td>          <td class="paramname"><span class="paramname"><em>distance_or_position</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>mode</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Command the <a class="el" href="class_position_generator.html" title="Used for generating position signals based on a target position and maximum velocity.">PositionGenerator</a> to move to a specified distance or position. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">distance_or_position</td><td>The target distance (incremental) or position (absolute). </td></tr>
    <tr><td class="paramname">mode</td><td>The mode of operation: INCREMENTAL or ABSOLUTE. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad6daff12b8005974f878d33d8ab5b1ba" name="ad6daff12b8005974f878d33d8ab5b1ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6daff12b8005974f878d33d8ab5b1ba">&#9670;&#160;</a></span>go() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PositionGenerator::go </td>
          <td>(</td>
          <td class="paramtype">float64_t</td>          <td class="paramname"><span class="paramname"><em>distance_or_position</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>mode</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ControlParameter</td>          <td class="paramname"><span class="paramname"><em>speed</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Command the <a class="el" href="class_position_generator.html" title="Used for generating position signals based on a target position and maximum velocity.">PositionGenerator</a> to move to a specified distance or position with a specified speed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">distance_or_position</td><td>The target distance (incremental) or position (absolute). </td></tr>
    <tr><td class="paramname">mode</td><td>The mode of operation: INCREMENTAL or ABSOLUTE. </td></tr>
    <tr><td class="paramname">speed</td><td>The speed in units per second. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4b39e72ca8796b959b5f1bd16bee5141" name="a4b39e72ca8796b959b5f1bd16bee5141"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b39e72ca8796b959b5f1bd16bee5141">&#9670;&#160;</a></span>set_speed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PositionGenerator::set_speed </td>
          <td>(</td>
          <td class="paramtype">ControlParameter</td>          <td class="paramname"><span class="paramname"><em>speed</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the speed (maximum velocity) for the <a class="el" href="class_position_generator.html" title="Used for generating position signals based on a target position and maximum velocity.">PositionGenerator</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">speed</td><td>The speed in units per second. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a name="doc-variable-members" id="doc-variable-members"></a><h2 id="header-doc-variable-members" class="groupheader">Member Data Documentation</h2>
<a id="abfeae5a3a55ab5333502b0d97f232647" name="abfeae5a3a55ab5333502b0d97f232647"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfeae5a3a55ab5333502b0d97f232647">&#9670;&#160;</a></span>output</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_block_port.html">BlockPort</a> PositionGenerator::output</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Output <a class="el" href="class_block_port.html" title="BlockPorts provide a unified interface for mapping inputs and outputs of different StepDance componen...">BlockPort</a> for the <a class="el" href="class_position_generator.html" title="Used for generating position signals based on a target position and maximum velocity.">PositionGenerator</a>. This is what you map from to a downstream component. </p>
<div class="fragment"><div class="line">position_gen.output.map(channelX.input_target_position); <span class="comment">// Map PositionGenerator output to ChannelX target position</span></div>
</div><!-- fragment --> 
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>lib/<a class="el" href="generators_8hpp_source.html">generators.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="class_position_generator.html">PositionGenerator</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
