<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Stepdance Software Library: BlockPort Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Stepdance Software Library
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('class_block_port.html','','class_block_port-members'); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">BlockPort Class Reference<div class="ingroups"><a class="el" href="group__core.html">Core Components</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>BlockPorts provide a unified interface for mapping inputs and outputs of different StepDance components (E.g. Channels, Kinematics, Generators, etc)  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="core_8hpp_source.html">core.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-methods" class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1b0f7e5c475c6b7e260be652d3e0adb9" id="r_a1b0f7e5c475c6b7e260be652d3e0adb9"><td class="memItemLeft" align="right" valign="top"><a id="a1b0f7e5c475c6b7e260be652d3e0adb9" name="a1b0f7e5c475c6b7e260be652d3e0adb9"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>BlockPort</b> ()</td></tr>
<tr class="memdesc:a1b0f7e5c475c6b7e260be652d3e0adb9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor for <a class="el" href="class_block_port.html" title="BlockPorts provide a unified interface for mapping inputs and outputs of different StepDance componen...">BlockPort</a>. Initializes a <a class="el" href="class_block_port.html" title="BlockPorts provide a unified interface for mapping inputs and outputs of different StepDance componen...">BlockPort</a> instance. You do not need to call this directly; BlockPorts are typically members of other components and are automatically initialized when the component is initialized. <br /></td></tr>
<tr class="memitem:adcdf52455b347f9f3a77d539c470d763" id="r_adcdf52455b347f9f3a77d539c470d763"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adcdf52455b347f9f3a77d539c470d763">set_ratio</a> (float world_units, float block_units=1.0)</td></tr>
<tr class="memdesc:adcdf52455b347f9f3a77d539c470d763"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the ratio between world units and block units for this <a class="el" href="class_block_port.html" title="BlockPorts provide a unified interface for mapping inputs and outputs of different StepDance componen...">BlockPort</a> for automatic conversion. Default is 1:1. For example if ou want the <a class="el" href="class_block_port.html" title="BlockPorts provide a unified interface for mapping inputs and outputs of different StepDance componen...">BlockPort</a> to transmit data in millimeters corresponding to a single step, you would set the ratio to 0.01 world units to 1 block_units (i.e. 1 step = 0.01mm).  <br /></td></tr>
<tr class="memitem:a15141b0edfad4e702588f16599e2655b" id="r_a15141b0edfad4e702588f16599e2655b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a15141b0edfad4e702588f16599e2655b">map</a> (<a class="el" href="class_block_port.html">BlockPort</a> *map_target, uint8_t mode)</td></tr>
<tr class="memdesc:a15141b0edfad4e702588f16599e2655b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maps this <a class="el" href="class_block_port.html" title="BlockPorts provide a unified interface for mapping inputs and outputs of different StepDance componen...">BlockPort</a> to a target <a class="el" href="class_block_port.html" title="BlockPorts provide a unified interface for mapping inputs and outputs of different StepDance componen...">BlockPort</a> with a specified mode (INCREMENTAL or ABSOLUTE).  <br /></td></tr>
<tr class="memitem:a5c274518e2f625878f717aab25a51d4e" id="r_a5c274518e2f625878f717aab25a51d4e"><td class="memItemLeft" align="right" valign="top"><a id="a5c274518e2f625878f717aab25a51d4e" name="a5c274518e2f625878f717aab25a51d4e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>map</b> (<a class="el" href="class_block_port.html">BlockPort</a> *map_target)</td></tr>
<tr class="memitem:a0e61b493a03687e4a6ac314a88320584" id="r_a0e61b493a03687e4a6ac314a88320584"><td class="memItemLeft" align="right" valign="top">float64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0e61b493a03687e4a6ac314a88320584">read</a> (uint8_t mode)</td></tr>
<tr class="memdesc:a0e61b493a03687e4a6ac314a88320584"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the position value of the <a class="el" href="class_block_port.html" title="BlockPorts provide a unified interface for mapping inputs and outputs of different StepDance componen...">BlockPort</a> in world units. Reading in INCREMENTAL mode returns the change to the position since the last read or update; reading in ABSOLUTE mode returns the absolute position value.  <br /></td></tr>
<tr class="memitem:a073b5a1e106bfcc72748bb5aa9749dc0" id="r_a073b5a1e106bfcc72748bb5aa9749dc0"><td class="memItemLeft" align="right" valign="top"><a id="a073b5a1e106bfcc72748bb5aa9749dc0" name="a073b5a1e106bfcc72748bb5aa9749dc0"></a>
float64_t&#160;</td><td class="memItemRight" valign="bottom"><b>read_absolute</b> ()</td></tr>
<tr class="memdesc:a073b5a1e106bfcc72748bb5aa9749dc0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the absolute position value of the <a class="el" href="class_block_port.html" title="BlockPorts provide a unified interface for mapping inputs and outputs of different StepDance componen...">BlockPort</a> in world units. <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>BlockPorts provide a unified interface for mapping inputs and outputs of different StepDance components (E.g. Channels, Kinematics, Generators, etc) </p>
<p>BlockPorts manage push and pull of data between components automatically through the <a class="el" href="#a15141b0edfad4e702588f16599e2655b" title="Maps this BlockPort to a target BlockPort with a specified mode (INCREMENTAL or ABSOLUTE).">map()</a> method, which when called assigns a target to the <a class="el" href="class_block_port.html" title="BlockPorts provide a unified interface for mapping inputs and outputs of different StepDance componen...">BlockPort</a>. Each <a class="el" href="class_block_port.html" title="BlockPorts provide a unified interface for mapping inputs and outputs of different StepDance componen...">BlockPort</a> has an internal position value. On each interrupt frame a component reads its input BlockPorts' position, performs internal calculations specific to the component, and then stores the result in its output BlockPorts' position. The component then calls BlockPort.push() for each output <a class="el" href="class_block_port.html" title="BlockPorts provide a unified interface for mapping inputs and outputs of different StepDance componen...">BlockPort</a> which transmits the position value to the mapped target <a class="el" href="class_block_port.html" title="BlockPorts provide a unified interface for mapping inputs and outputs of different StepDance componen...">BlockPort</a>. However BlockPorts can only have one target of their map function. To get around this you can also have <a class="el" href="class_block_port.html" title="BlockPorts provide a unified interface for mapping inputs and outputs of different StepDance componen...">BlockPort</a> Inputs pull from multiple other BlockPorts by mapping an input <a class="el" href="class_block_port.html" title="BlockPorts provide a unified interface for mapping inputs and outputs of different StepDance componen...">BlockPort</a> to either an input or an output. The Component will first call BlockPort.pull() on its input BlockPorts to retrieve the latest values from all mapped BlockPorts, then perform its internal calculations, and finally call BlockPort.push() on its output BlockPorts to transmit the results.</p>
<div class="image">
<img src="blockport_diagram.png" alt="" width="400px"/>
<div class="caption">
Typical mapping patterns of BlockPorts. Components (A-E) each have one BlockPort Input and one BlockPort Output. Multiple BlockPort Outputs can map to a single Input (e.g. A.output and C.output are both mapped to B.input). Inputs can map to multiple inputs or outputs (e.g. D.input is mapped to C.output)</div></div>
<p>You will never instantiate a <a class="el" href="class_block_port.html" title="BlockPorts provide a unified interface for mapping inputs and outputs of different StepDance componen...">BlockPort</a> directly; instead, you can access the BlockPorts that are members of different components. The example below shows how to access and map an <a class="el" href="class_input_port.html" title="InputPort components receive motion streams on physical Stepdance input ports, and map these signals ...">InputPort</a>'s <a class="el" href="class_block_port.html" title="BlockPorts provide a unified interface for mapping inputs and outputs of different StepDance componen...">BlockPort</a> to a <a class="el" href="class_channel.html" title="Channels are modules that store the machine&#39;s positional state.">Channel</a>'s input target position <a class="el" href="class_block_port.html" title="BlockPorts provide a unified interface for mapping inputs and outputs of different StepDance componen...">BlockPort</a>. </p><div class="fragment"><div class="line"><a class="code hl_class" href="class_input_port.html">InputPort</a> inputA;</div>
<div class="line">inputA.<a class="code hl_function" href="class_input_port.html#a7bec13041ef7d76fbcb3f4126300270a">begin</a>(INPUT_A); <span class="comment">// Initialize InputPort A</span></div>
<div class="line">inputA.<a class="code hl_variable" href="class_input_port.html#a7352accb51d331f3ec1f827c0af6fc24">output_x</a>.<a class="code hl_function" href="#a15141b0edfad4e702588f16599e2655b">map</a>(channelX.input_target_position); <span class="comment">// Map SIGNAL_X to Channel X&#39;s input target position</span></div>
</div><!-- fragment --> </div><a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Member Function Documentation</h2>
<a id="a15141b0edfad4e702588f16599e2655b" name="a15141b0edfad4e702588f16599e2655b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15141b0edfad4e702588f16599e2655b">&#9670;&#160;</a></span>map()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BlockPort::map </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_block_port.html">BlockPort</a> *</td>          <td class="paramname"><span class="paramname"><em>map_target</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>mode</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maps this <a class="el" href="class_block_port.html" title="BlockPorts provide a unified interface for mapping inputs and outputs of different StepDance componen...">BlockPort</a> to a target <a class="el" href="class_block_port.html" title="BlockPorts provide a unified interface for mapping inputs and outputs of different StepDance componen...">BlockPort</a> with a specified mode (INCREMENTAL or ABSOLUTE). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">map_target</td><td>Pointer to the target <a class="el" href="class_block_port.html" title="BlockPorts provide a unified interface for mapping inputs and outputs of different StepDance componen...">BlockPort</a> to map to. </td></tr>
    <tr><td class="paramname">mode</td><td>Mode of operation: INCREMENTAL or ABSOLUTE. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0e61b493a03687e4a6ac314a88320584" name="a0e61b493a03687e4a6ac314a88320584"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e61b493a03687e4a6ac314a88320584">&#9670;&#160;</a></span>read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float64_t BlockPort::read </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>mode</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the position value of the <a class="el" href="class_block_port.html" title="BlockPorts provide a unified interface for mapping inputs and outputs of different StepDance componen...">BlockPort</a> in world units. Reading in INCREMENTAL mode returns the change to the position since the last read or update; reading in ABSOLUTE mode returns the absolute position value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mode</td><td>Mode of operation: INCREMENTAL or ABSOLUTE. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adcdf52455b347f9f3a77d539c470d763" name="adcdf52455b347f9f3a77d539c470d763"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcdf52455b347f9f3a77d539c470d763">&#9670;&#160;</a></span>set_ratio()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BlockPort::set_ratio </td>
          <td>(</td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>world_units</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>block_units</em></span><span class="paramdefsep"> = </span><span class="paramdefval">1.0</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the ratio between world units and block units for this <a class="el" href="class_block_port.html" title="BlockPorts provide a unified interface for mapping inputs and outputs of different StepDance componen...">BlockPort</a> for automatic conversion. Default is 1:1. For example if ou want the <a class="el" href="class_block_port.html" title="BlockPorts provide a unified interface for mapping inputs and outputs of different StepDance componen...">BlockPort</a> to transmit data in millimeters corresponding to a single step, you would set the ratio to 0.01 world units to 1 block_units (i.e. 1 step = 0.01mm). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">world_units</td><td>Number of world units. </td></tr>
    <tr><td class="paramname">block_units</td><td>Number of block units. Default is 1. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>lib/<a class="el" href="core_8hpp_source.html">core.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="class_block_port.html">BlockPort</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
